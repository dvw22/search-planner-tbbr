function [waypoints] = cell_search_path(decomposed_map,cell)
% cell_search path Generates a search path within a cell
%   Detailed explanation goes here

[ceiling_idx, floor_idx] = ceil_floor_cell(decomposed_map, cell);

num_waypoints = size(ceiling_idx,1)*2;

waypoints = zeros(num_waypoints,2);

% start at bottom left
waypoints(1,:) = floor_idx(1,:);

% start double counting at ceiling
ceiling = true;
count = 0;
count_limit = 1;

for i = 2:num_waypoints-1
    if count == count_limit
        ceiling = ~ceiling;
        count = 0;
    end
    
    if ceiling == true
        waypoints(i,:) = ceiling_idx(i,:);
        count = count + 1;        
    elseif ceiling == false
        waypoints(i,:) = floor_idx(i,:);
        count = count + 1;
    end
end

start = 2

for i = 2:4:num_waypoints-1
    
    
    for j = start:start+1
    % Add two next ceiling points
    waypoints(i,:) = ceiling_idx(start,:);
    waypoints(i+1,:) = ceiling_idx(start+1,:);
    
    % Add two next floor points
    waypoints(i+2,:) = floor_idx(start,:);
    waypoints(i+3,:) = floor_idx(start+1,:);
    
end

% end at top right
waypoints(num_waypoints,:) = ceiling_idx(num_waypoints,:);

end

